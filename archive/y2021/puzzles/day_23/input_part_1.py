from typing import List

raw_input = """
#############
#...........#
###C#B#D#D###
  #B#C#A#A#
  #########
"""
"""
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
"""

"""
A: 9 + 3 + 3 + 6 = 21 = 21
B: 2 + 3 + 5     = 10 = 100
C: 7 + 5         = 12 = 1200
D: 2 + 5 + 2     = 9 = 9000

= 10321
"""


def get_input() -> List[str]:
    return raw_input.split("\n")[1:-1]


"""
#############
#...........#
###C#B#D#D###
  #D#C#B#A#
  #D#B#A#C#
  #B#C#A#A#
  #########
"""

"""
#############
#..CC.BB....#
###C#.#D#D###
  #D#.#B#A#
  #D#.#A#C#
  #B#.#A#A#
  #########
"""

"""
#############
#..CC......D#
###C#.#.#D###
  #D#.#B#A#
  #D#B#A#C#
  #B#B#A#A#
  #########
"""

"""
#############
#..CC...AA.D#
###C#.#.#D###
  #D#B#.#A#
  #D#B#.#C#
  #B#B#.#A#
  #########
"""

"""
#############
#.......AA.D#
###.#.#.#D###
  #D#B#C#A#
  #D#B#C#C#
  #B#B#C#A#
  #########
"""

"""
#############
#DD.....AA.D#
###.#B#.#D###
  #.#B#C#A#
  #.#B#C#C#
  #.#B#C#A#
  #########
"""

"""
#############
#DD........D#
###.#B#.#D###
  #.#B#C#A#
  #A#B#C#C#
  #A#B#C#A#
  #########
"""

"""
#############
#DD.......DD#
###.#B#.#.###
  #.#B#C#A#
  #A#B#C#C#
  #A#B#C#A#
  #########
"""

"""
#############
#DD.......DD#
###A#B#C#.###
  #A#B#C#.#
  #A#B#C#.#
  #A#B#C#.#
  #########
"""

"""
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #A#B#C#D#
  #A#B#C#D#
  #########
"""

"""
A: 5 + 5 + 9 + 9 + 10 + 11        = 49  = 49
B: 3 + 4 + 5 + 5 + 6 + 7          = 30  = 300
C: 4 + 5 + 7 + 7 + 7 + 6          = 36  = 3600
D: 5 + 4 + 4 + 2 + 5 + 5 + 9 + 9  = 43  = 43000

= 46949
"""


"""
#############
#...........#
###C#B#D#D###
  #D#C#B#A#
  #D#B#A#C#
  #B#C#A#A#
  #########
"""
"""
#############
#B......A.AD#
###C#B#.#D###
  #D#C#.#A#
  #D#B#.#C#
  #B#C#.#A#
  #########
"""
"""
#############
#B......A.AD#
###.#B#.#D###
  #D#C#.#A#
  #D#B#.#C#
  #B#C#C#A#
  #########
"""
""" B: 4 + 4, C: 7 + 8
#############
#BB.B...A.AD#
###.#.#.#D###
  #D#.#C#A#
  #D#.#C#C#
  #B#.#C#A#
  #########
"""
""" B: 5 + 6 + 6
#############
#.......A.AD#
###.#.#.#D###
  #D#B#C#A#
  #D#B#C#C#
  #B#B#C#A#
  #########
"""
""" D: 4 + 4, B: 8
#############
#DD.....A.AD#
###.#B#.#D###
  #.#B#C#A#
  #.#B#C#C#
  #.#B#C#A#
  #########
"""
""" A: 9 + 9, D: 2
#############
#DD.......DD#
###.#B#.#.###
  #.#B#C#A#
  #A#B#C#C#
  #A#B#C#A#
  #########
"""
""" A: 10 + 11, C: 6
#############
#DD.......DD#
###A#B#C#.###
  #A#B#C#.#
  #A#B#C#.#
  #A#B#C#.#
  #########
"""
""" D: 5 + 5 + 9 + 9
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #A#B#C#D#
  #A#B#C#D#
  #########
"""
"""
A: 5 + 5 + 9 + 9 + 10 + 11        = 49 = 49
B: 5 + 3 + 4 + 5 + 5 + 8 + 6      = 36 = 360
C: 9 + 7 + 8 + 6                  = 30 = 3000
D: 5 + 4 + 4 + 2 + 5 + 5 + 9 + 9  = 43 = 43000

= 46409
"""


"""
#############
#...........#
###C#B#D#D###
  #D#C#B#A#
  #D#B#A#C#
  #B#C#A#A#
  #########
"""
"""
#############
#AC.......AD#
###C#B#D#.###
  #D#C#B#.#
  #D#B#A#.#
  #B#C#A#.#
  #########
"""
"""
#############
#AC.......AD#
###C#B#.#.###
  #D#C#B#.#
  #D#B#A#.#
  #B#C#A#D#
  #########
"""
"""
#############
#ACCC.BB..AD#
###C#.#.#.###
  #D#.#B#.#
  #D#.#A#.#
  #B#.#A#D#
  #########
"""
"""
#############
#ACCC.....AD#
###C#.#.#.###
  #D#B#.#.#
  #D#B#A#.#
  #B#B#A#D#
  #########
"""
"""
#############
#ACCC...AAAD#
###C#.#.#.###
  #D#B#.#.#
  #D#B#.#.#
  #B#B#.#D#
  #########
"""
"""
#############
#AC.....AAAD#
###.#.#.#.###
  #D#B#C#.#
  #D#B#C#.#
  #B#B#C#D#
  #########
"""

"""--------"""

""" 
#############
#...........#
###C#B#D#D###
  #D#C#B#A#
  #D#B#A#C#
  #B#C#A#A#
  #########
"""
""" 40 + 600 + 40 + 700
#############
#CC...B.B...#
###C#.#D#D###
  #D#.#B#A#
  #D#.#A#C#
  #B#.#A#A#
  #########
"""
""" 50 + 60 + 5000 + 60
#############
#CC........D#
###C#.#.#D###
  #D#B#.#A#
  #D#B#A#C#
  #B#B#A#A#
  #########
"""
""" 6 + 5
#############
#CC.....A.AD#
###C#.#.#D###
  #D#B#.#A#
  #D#B#.#C#
  #B#B#.#A#
  #########
"""
""" 900 + 900 + 700
#############
#.......A.AD#
###.#.#.#D###
  #D#B#C#A#
  #D#B#C#C#
  #B#B#C#A#
  #########
"""
""" 4000 + 4000 + 70
#############
#DD.....A.AD#
###.#B#.#D###
  #.#B#C#A#
  #.#B#C#C#
  #.#B#C#A#
  #########
"""
""" 9 + 10 
#############
#DD........D#
###.#B#.#D###
  #.#B#C#A#
  #A#B#C#C#
  #A#B#C#A#
  #########
"""
""" 2000 + 10 + 600 + 11
#############
#DD.......DD#
###A#B#C#.###
  #A#B#C#.#
  #A#B#C#.#
  #A#B#C#.#
  #########
"""


""" 
#############
#AA.......BD#
###C#B#.#D###
  #D#C#.#A#
  #D#B#.#C#
  #B#C#.#A#
  #########
"""
""" 
#############
#AA.D.....BD#
###.#B#.#.###
  #D#C#.#A#
  #D#B#.#C#
  #B#C#C#A#
  #########
"""
